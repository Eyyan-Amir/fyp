import React, { useState, useEffect } from 'react';
import { useParams, useHistory } from 'react-router';
import { useSelector } from "react-redux";
import { Button, Stack } from '@mui/material';
import { ROUTES } from "../../routes/index"

function JobApply() {
  const { id } = useParams();
  const history = useHistory();
  const { jobs } = useSelector(state => state.jobEase);
  const [selectJob, setSelectJob] = useState({});

  const handleAlert = () => {
    alert("you successfully applied on this job")
  }

  useEffect(() => {
    if (id) {
      let appliedJob = jobs.find(f => f.id === +id);
      setSelectJob(appliedJob);
    }
  }, [jobs, id])

  return (
    <div className='jobApply'>
      <div className="card">
        <div className="title">{selectJob?.title}</div>
        <div className='location'>
          <svg className="mr-1" width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clipPath="url(#clip0_1010_13)"><path d="M7.49999 0.5C5.07629 0.5 3.10449 2.4718 3.10449 4.8955C3.10449 5.55647 3.24766 6.19171 3.52992 6.784C3.5356 6.79667 3.54157 6.80911 3.54793 6.82156L6.86896 13.2517C6.99088 13.4878 7.23433 13.636 7.49994 13.636C7.7656 13.636 8.00905 13.4878 8.13092 13.2517L11.451 6.82332C11.4568 6.81224 11.4621 6.80105 11.4672 6.78974C11.7514 6.19575 11.8954 5.55858 11.8954 4.8955C11.8955 2.4718 9.92369 0.5 7.49999 0.5ZM7.49999 7.19619C6.23138 7.19619 5.19929 6.1641 5.19929 4.8955C5.19929 3.62695 6.23138 2.59486 7.49999 2.59486C8.7686 2.59486 9.80069 3.62695 9.80069 4.8955C9.80069 6.1641 8.7686 7.19619 7.49999 7.19619Z" fill="black"></path><path d="M9.19321 14.6479H5.80697C5.57159 14.6479 5.38086 14.8387 5.38086 15.0741C5.38086 15.3094 5.57159 15.5002 5.80697 15.5002H9.19321C9.4286 15.5002 9.61932 15.3094 9.61932 15.0741C9.61932 14.8387 9.42854 14.6479 9.19321 14.6479Z" fill="black"></path></g><defs><clipPath id="clip0_1010_13"><rect width="15" height="15" fill="black" transform="translate(0 0.5)"></rect></clipPath></defs></svg>
          <span>
            Lahore, Pakistan
          </span> 
        </div>
        <div className='posted-date'> 
          <div className='posted-date-left'>
            <div>
              <svg className="mr-2" width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clipPath="url(#clip0_1010_122)"><path d="M14.9096 2.84575C14.9096 2.27936 14.4504 1.82017 13.884 1.82017H12.1497V0.918393C12.1497 0.687376 11.9623 0.5 11.7313 0.5H10.8276C10.5976 0.5 10.4088 0.687376 10.4088 0.918393V1.82064H4.64993V0.918393C4.64993 0.687376 4.46256 0.5 4.23154 0.5H3.38811C3.15709 0.5 2.96972 0.687376 2.96972 0.918393V1.82064H1.11494C0.548544 1.82064 0.0893555 2.27983 0.0893555 2.84623V6.50076H0.629661V14.446C0.629661 15.029 1.10166 15.5005 1.68418 15.5005H13.2559C13.8389 15.5005 14.3104 15.029 14.3104 14.446V6.50028H14.9115L14.9096 2.84575ZM12.6298 12.7055C12.6298 13.2885 12.1582 13.76 11.5752 13.76H3.42416C2.84164 13.76 2.36964 13.2885 2.36964 12.7055V6.50028H12.6293V12.7055H12.6298Z" fill="black"></path><path d="M5.4898 7.63965H3.81006V9.38011H5.4898V7.63965Z" fill="black"></path><path d="M8.36919 7.63965H6.68945V9.38011H8.36919V7.63965Z" fill="black"></path><path d="M11.2495 7.63965H9.56934V9.38011H11.2495V7.63965Z" fill="black"></path><path d="M5.4898 10.7002H3.81006V12.4402H5.4898V10.7002Z" fill="black"></path><path d="M8.36919 10.7002H6.68945V12.4402H8.36919V10.7002Z" fill="black"></path><path d="M11.2495 10.7002H9.56934V12.4402H11.2495V10.7002Z" fill="black"></path></g><defs><clipPath id="clip0_1010_122"><rect width="15.0005" height="15" fill="black" transform="translate(0 0.5)"></rect></clipPath></defs></svg>
              <span>Posted 4 days ago</span>
            </div>
            <div>
              <svg className="mr-2" width="17" height="10" viewBox="0 0 17 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.45238 0C5.22255 0 2.29356 1.7536 0.132271 4.60192C-0.0440904 4.83528 -0.0440904 5.16129 0.132271 5.39465C2.29356 8.2464 5.22255 10 8.45238 10C11.6822 10 14.6112 8.2464 16.7725 5.39808C16.9489 5.16472 16.9489 4.83871 16.7725 4.60535C14.6112 1.7536 11.6822 0 8.45238 0ZM8.68407 8.52093C6.54007 8.65477 4.76954 6.90117 4.9044 4.77008C5.01506 3.01304 6.45016 1.58888 8.22069 1.47907C10.3647 1.34523 12.1352 3.09883 12.0004 5.22992C11.8862 6.98353 10.4511 8.40769 8.68407 8.52093ZM8.57687 6.8943C7.42188 6.96637 6.46745 6.02265 6.54353 4.87646C6.60232 3.92931 7.37692 3.16404 8.33135 3.10227C9.48634 3.0302 10.4408 3.97392 10.3647 5.12011C10.3024 6.07069 9.52784 6.83596 8.57687 6.8943Z" fill="black"></path></svg>
              <span>96 views</span>
            </div>
            <div>
              <svg className="mr-2" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.15594 0H1.85596V14H12.1445V3.2L9.15594 0ZM7.26737 12.2343H3.7131C3.55881 12.2343 3.42453 12.1114 3.42453 11.9457C3.42453 11.7914 3.54738 11.6571 3.7131 11.6571H7.26737C7.42166 11.6571 7.55595 11.78 7.55595 11.9457C7.55595 12.1 7.43595 12.2343 7.26737 12.2343ZM10.2902 10.4114H3.7131C3.55881 10.4114 3.42453 10.2886 3.42453 10.1229C3.42453 9.96857 3.54738 9.83429 3.7131 9.83429H10.2902C10.4445 9.83429 10.5788 9.95714 10.5788 10.1229C10.5788 10.2886 10.4474 10.4114 10.2902 10.4114ZM10.2902 8.6H3.7131C3.55881 8.6 3.42453 8.47714 3.42453 8.31143C3.42453 8.15714 3.54738 8.02286 3.7131 8.02286H10.2902C10.4445 8.02286 10.5788 8.14571 10.5788 8.31143C10.5788 8.47714 10.4474 8.6 10.2902 8.6ZM10.2902 6.78857H3.7131C3.55881 6.78857 3.42453 6.66571 3.42453 6.5C3.42453 6.33429 3.54738 6.21143 3.7131 6.21143H10.2902C10.4445 6.21143 10.5788 6.33429 10.5788 6.5C10.5788 6.66571 10.4474 6.78857 10.2902 6.78857ZM10.2902 4.96571H3.7131C3.55881 4.96571 3.42453 4.84286 3.42453 4.67714C3.42453 4.52286 3.54738 4.38857 3.7131 4.38857H10.2902C10.4445 4.38857 10.5788 4.51143 10.5788 4.67714C10.5788 4.84571 10.4474 4.96571 10.2902 4.96571ZM8.5788 3.76571V0.565714L11.5674 3.76571H8.5788Z" fill="black"></path></svg>
              <span>Report Job</span>
            </div>
          </div>
          <div className='posted-date-right'>
            <svg className="mr-2" width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.96359 10.0613C8.96359 10.2253 9.09651 10.3583 9.26056 10.3583C9.42461 10.3583 9.55753 10.2253 9.55753 10.0613C9.55753 9.58128 9.23593 9.17519 8.79693 9.0465V8.94834C8.79693 8.78433 8.66401 8.65137 8.49996 8.65137C8.33591 8.65137 8.20299 8.78433 8.20299 8.94834V9.0465C7.76398 9.17519 7.44238 9.58128 7.44238 10.0613C7.44238 10.5414 7.76398 10.9475 8.20299 11.0762V11.9381C8.10122 11.853 8.03633 11.7252 8.03633 11.5825C8.03633 11.4185 7.9034 11.2855 7.73935 11.2855C7.57531 11.2855 7.44238 11.4185 7.44238 11.5825C7.44238 12.0625 7.76398 12.4686 8.20299 12.5973V12.6955C8.20299 12.8595 8.33591 12.9925 8.49996 12.9925C8.66401 12.9925 8.79693 12.8595 8.79693 12.6955V12.5973C9.23593 12.4686 9.55753 12.0625 9.55753 11.5825C9.55753 11.1025 9.23593 10.6964 8.79693 10.5677V9.70574C8.89869 9.79083 8.96359 9.91856 8.96359 10.0613ZM8.03633 10.0613C8.03633 9.9186 8.10122 9.79083 8.20299 9.70574V10.4169C8.10122 10.3318 8.03633 10.204 8.03633 10.0613ZM8.96359 11.5825C8.96359 11.7252 8.89869 11.853 8.79693 11.938V11.2269C8.89869 11.312 8.96359 11.4398 8.96359 11.5825Z" fill="black"></path><path d="M16.9998 2.95625C16.9998 2.62823 16.7339 2.3623 16.4059 2.3623H0.593943C0.265928 2.3623 0 2.62823 0 2.95625L0.000158385 15.0441C0.000158385 15.3721 0.266087 15.6381 0.594102 15.6381H16.4061C16.7341 15.6381 17 15.3721 17 15.0441L16.9998 2.95625ZM13.8373 14.4501H3.16283C2.93677 13.4723 2.16583 12.7014 1.18804 12.4753V9.16856C2.16583 8.94251 2.93677 8.17157 3.16283 7.19375H13.8373C14.0633 8.17149 14.8342 8.94239 15.8119 9.16849V11.4005V12.4754C14.8342 12.7015 14.0633 13.4724 13.8373 14.4501ZM2.34053 7.19375C2.15629 7.734 1.7283 8.16203 1.18804 8.34627V7.19375H2.34053ZM2.92877 6.00586C3.03271 5.80749 3.11151 5.59608 3.16251 5.37672H13.8376C13.8886 5.59604 13.9674 5.80749 14.0714 6.00586H2.92877ZM15.8119 7.19375V8.34619C15.2717 8.16191 14.8438 7.73392 14.6596 7.19375H15.8119ZM15.8119 6.00586H15.0264C14.8637 5.82206 14.7397 5.60784 14.6607 5.37672H15.8119V6.00586ZM2.9237 4.18883C3.03014 3.98769 3.11068 3.77304 3.16251 3.55015H13.8376C13.8895 3.77304 13.97 3.98769 14.0765 4.18883H2.9237ZM2.33946 5.37672C2.26051 5.60784 2.13645 5.82202 1.97383 6.00586H1.18789V5.37672H2.33946ZM15.8119 4.18883H15.0351C14.8683 4.00289 14.7411 3.78531 14.6608 3.55015H15.812V4.18883H15.8119ZM2.33942 3.55019C2.25908 3.78535 2.13194 4.00293 1.96516 4.18887H1.18789V3.55019H2.33942ZM1.18804 13.2976C1.7283 13.4819 2.15629 13.9099 2.34053 14.4501H1.18804V13.2976ZM14.6596 14.4501C14.8439 13.9099 15.2719 13.4819 15.8121 13.2976V14.4501H14.6596Z" fill="black"></path><path d="M8.50035 7.52539C6.68253 7.52539 5.20361 9.00431 5.20361 10.8221C5.20361 12.64 6.68253 14.1189 8.50035 14.1189C10.3182 14.1189 11.7971 12.64 11.7971 10.8221C11.7971 9.00431 10.3182 7.52539 8.50035 7.52539ZM8.50035 13.3269C7.1192 13.3269 5.99554 12.2033 5.99554 10.8221C5.99554 9.44098 7.1192 8.31731 8.50035 8.31731C9.88151 8.31731 11.0052 9.44098 11.0052 10.8221C11.0052 12.2033 9.88151 13.3269 8.50035 13.3269Z" fill="black"></path></svg>
            <span>{selectJob?.salary}/Month</span>
          </div>
        </div>
        <div className='sub-title'>Job Description</div>
        <div className='desc' dangerouslySetInnerHTML={{ __html: selectJob?.desc }}></div>
        <div className='sub-title'>Benefits</div>
        <div className='desc' dangerouslySetInnerHTML={{ __html: selectJob?.benefits }}></div>
        <div className='sub-title'>Job Requirment</div>
        <div className='desc' dangerouslySetInnerHTML={{ __html: selectJob?.requirment }}></div>
        <Stack direction="row" spacing={2} sx={{marginTop: "24px"}}>
          <Button 
            variant="contained"
            size='large'
            onClick={() => history.push(ROUTES.HOME)}
          >
            Back
          </Button>
          <Button variant="contained" size='large' onClick={handleAlert}>Apply</Button>
        </Stack>
      </div>
    </div>
  )
}

export default JobApply;
